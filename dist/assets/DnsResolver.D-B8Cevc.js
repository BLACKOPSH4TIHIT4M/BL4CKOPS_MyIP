import{u as M,d as R,r as _,k as l,p as e,y as r,z as c,v as y,s as b,E as L,O as T,P as U,C as $,F as N,A,l as d}from"./vendor.DHFmOzci.js";import{u as j}from"./utils/utils-auth.Cj4TPQPL.js";import{t as q}from"./utils/utils-analytics.BMWz_Cy8.js";import{_ as z}from"./index-CuWL2HxC.js";import"./utils/utils-getips.B2avacMe.js";import"./utils/utils-data.CC01m_V6.js";import"./speedtest.Cf2juqOf.js";const V={class:"dns-resolver-section my-4"},B={class:"text-secondary"},I={class:"row"},P={class:"col-12 mb-3"},F={class:"card-body"},K={class:"col-12 col-md-auto"},O={for:"queryURL",class:"col-form-label"},X={class:"input-group mb-2 mt-2"},H=["disabled","placeholder"],G=["disabled"],J={class:"dropdown-menu dropdown-menu-end"},Q=["onClick"],W={class:"dropdown-item"},Y=["disabled"],Z={key:0},ee={key:1,class:"spinner-grow spinner-grow-sm","aria-hidden":"true"},se={class:"jn-placeholder"},oe={key:0,class:"text-danger"},te={key:0},re={class:"table-responsive text-nowrap"},ne={scope:"col"},ae={scope:"col"},le={__name:"DnsResolver",setup(de){const{t:n}=M(),f=j(),k=R(()=>f.isDarkMode);R(()=>f.isMobile);const p=_(""),g=_("A"),a=_("idle"),i=_(""),u=_([]),D=o=>{o.match(/^https?:\/\//)||(o="http://"+o);try{const s=new URL(o).hostname;if(s.match(/^[a-z0-9-]+(\.[a-z0-9-]+)*\.[a-z]{2,}$/i))return s}catch{}return i.value=n("dnsresolver.invalidURL"),null},S=o=>{g.value=o},w=()=>{q("Section","StartClick","DNSResolver"),i.value="";const o=D(p.value),t=g.value;o&&x(o,t)},x=async(o,t)=>{u.value=[],a.value="running";try{const s=await fetch(`/api/dnsresolver?hostname=${o}&type=${t}`);if(!s.ok)throw new Error("Network response was not ok");const v=await s.json();C(v),a.value="idle",i.value=""}catch(s){console.error("Error fetching DNS results:",s),a.value="idle",i.value=n("dnsresolver.fetchError")}},C=o=>{const t=(s,v)=>s.map(h=>{const m=Object.keys(h)[0],E=Array.isArray(h[m])?h[m].join(", "):h[m];return{provider:`${m} (${v})`,address:E}});o.result_dns&&u.value.push(...t(o.result_dns,"DNS")),o.result_doh&&u.value.push(...t(o.result_doh,"DoH ðŸ”’"))};return(o,t)=>(d(),l("div",V,[e("div",B,[e("p",null,r(c(n)("dnsresolver.Note")),1)]),e("div",I,[e("div",P,[e("div",{class:y(["card jn-card",{"dark-mode dark-mode-border":k.value}])},[e("div",F,[e("div",K,[e("label",O,r(c(n)("dnsresolver.Note2")),1)]),e("div",X,[L(e("input",{type:"text",class:y(["form-control",{"dark-mode":k.value}]),disabled:a.value==="running",placeholder:c(n)("dnsresolver.Placeholder"),"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),onKeyup:U(w,["enter"]),name:"queryURL",id:"queryURL","data-1p-ignore":""},null,42,H),[[T,p.value]]),e("button",{type:"button",class:"btn btn-primary dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:a.value==="running"||!p.value},[$(r(g.value)+" "+r(c(n)("dnsresolver.Record"))+" ",1),t[1]||(t[1]=e("span",{class:"visually-hidden"},"Choose Type",-1))],8,G),e("ul",J,[(d(),l(N,null,A(["A","AAAA","CNAME","MX","NS","TXT"],s=>e("li",{key:s,onClick:v=>S(s)},[e("span",W,r(s),1)],8,Q)),64))]),e("button",{class:"btn btn-primary",onClick:w,disabled:a.value==="running"||!p.value},[a.value==="idle"?(d(),l("span",Z,r(c(n)("dnsresolver.Run")),1)):b("",!0),a.value==="running"?(d(),l("span",ee)):b("",!0)],8,Y)]),e("div",se,[i.value?(d(),l("p",oe,r(i.value),1)):b("",!0)]),u.value&&u.value.length?(d(),l("div",te,[e("div",re,[e("table",{class:y(["table table-hover",{"table-dark":k.value}])},[e("thead",null,[e("tr",null,[e("th",ne,r(c(n)("dnsresolver.Provider")),1),e("th",ae,r(c(n)("dnsresolver.Result")),1)])]),e("tbody",null,[(d(!0),l(N,null,A(u.value,(s,v)=>(d(),l("tr",{key:v},[e("td",null,r(s.provider),1),e("td",{class:y([s.address==="N/A"?"opacity-50":""])},r(s.address),3)]))),128))])],2)])])):b("",!0)])],2)])])]))}},me=z(le,[["__scopeId","data-v-e73346ad"]]);export{me as default};
