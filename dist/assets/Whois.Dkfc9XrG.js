import{u as M,d as y,r as p,k as l,p as s,y as i,z as m,v as d,s as w,E as N,O as W,P as j,F as q,A,l as n,C as V}from"./vendor.DHFmOzci.js";import{u as O}from"./utils/utils-auth.Cj4TPQPL.js";import{t as $}from"./utils/utils-analytics.BMWz_Cy8.js";import{i as B}from"./utils/utils-getips.B2avacMe.js";import{_ as F}from"./index-CuWL2HxC.js";import"./utils/utils-data.CC01m_V6.js";import"./speedtest.Cf2juqOf.js";const T={class:"whois-section my-4"},K={class:"text-secondary"},G={class:"row"},H={class:"col-12 mb-3"},J={class:"card-body"},Q={class:"col-12 col-md-auto"},X={for:"queryURLorIP",class:"col-form-label"},Y={class:"input-group mb-2 mt-2"},Z=["disabled","placeholder"],x=["disabled"],ee={key:0},se={key:1,class:"spinner-grow spinner-grow-sm","aria-hidden":"true"},ae={class:"jn-placeholder"},oe={key:0,class:"text-danger"},te={key:0},re={class:"alert alert-success"},le=["data-bs-theme"],ie=["id"],ne=["data-bs-target","aria-expanded","aria-controls"],ce=["id","aria-labelledby"],de={__name:"Whois",setup(ue){const{t:r}=M(),_=O(),b=y(()=>_.isDarkMode),I=y(()=>_.isMobile),P=y(()=>_.isSignedIn),g=p(""),u=p("idle"),c=p(""),f=p([]),v=p(""),h=p({}),k=e=>{e.match(/^https?:\/\//)||(e="http://"+e);try{const C=new URL(e).hostname.split(".").slice(-2).join(".");if(C.match(/^[a-z0-9-]+(\.[a-z0-9-]+)*\.[a-z]{2,}$/i))return C}catch{}return!1},U=e=>k(e)?(v.value="domain",k(e)):B(e)?(v.value="ip",e):(c.value=r("whois.invalidURL"),!1),R=()=>{$("Section","StartClick","Whois"),c.value="",f.value=[],h.value={};const e=U(g.value);e&&L(e)},L=async e=>{u.value="running";try{const a=await fetch(`/api/whois?q=${e}`);if(!a.ok)throw new Error("Network response was not ok");const o=await a.json();z(o),v.value==="domain"&&f.value.length>=1?(h.value=o,P.value&&e.toLowerCase().includes("ipcheck.ing")&&E(),c.value=""):v.value==="ip"&&o.__raw?(h.value=o,c.value=""):c.value=r("whois.fetchError"),u.value="idle"}catch(a){console.error("Error fetching Whois results:",a),u.value="idle",c.value=r("whois.fetchError")}},z=e=>{if(v.value==="domain")for(const[a,o]of Object.entries(e))a.match(/^[a-z0-9-]+(\.[a-z0-9-]+)*\.[a-z]{2,}$/i)&&e[a].__raw&&f.value.push(a)},D=e=>{e=e.replace(/^( {1,20})/gm,"");const a=e.indexOf(`
For more information`);return a!==-1?e.substring(0,a):e},S=e=>(e=e.replace(/^#.*\n/gm,""),e=e.replace(/^\n*/,""),e=e.replace(/\n$/,""),e),E=()=>{_.userAchievements.CuriousCat.achieved||_.setTriggerUpdateAchievements("CuriousCat")};return(e,a)=>(n(),l("div",T,[s("div",K,[s("p",null,i(m(r)("whois.Note")),1)]),s("div",G,[s("div",H,[s("div",{class:d(["card jn-card",{"dark-mode dark-mode-border":b.value}])},[s("div",J,[s("div",Q,[s("label",X,i(m(r)("whois.Note2")),1)]),s("div",Y,[N(s("input",{type:"text",class:d(["form-control",{"dark-mode":b.value}]),disabled:u.value==="running",placeholder:m(r)("whois.Placeholder"),"onUpdate:modelValue":a[0]||(a[0]=o=>g.value=o),onKeyup:j(R,["enter"]),name:"queryURLorIP",id:"queryURLorIP","data-1p-ignore":""},null,42,Z),[[W,g.value]]),s("button",{class:"btn btn-primary",onClick:R,disabled:u.value==="running"||!g.value},[u.value==="idle"?(n(),l("span",ee,i(m(r)("whois.Run")),1)):w("",!0),u.value==="running"?(n(),l("span",se)):w("",!0)],8,x)]),s("div",ae,[c.value?(n(),l("p",oe,i(c.value),1)):w("",!0)]),h.value&&Object.keys(h.value).length?(n(),l("div",te,[s("div",re,i(m(r)("whois.Note3")),1),v.value==="domain"?(n(),l("div",{key:0,class:"accordion",id:"whoisResultAccordion","data-bs-theme":b.value?"dark":""},[(n(!0),l(q,null,A(f.value,(o,t)=>(n(),l("div",{class:"accordion-item",key:o},[s("h2",{class:"accordion-header",id:"heading"+t},[s("button",{class:d(["accordion-button",{collapsed:t!==0}]),type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapse"+t,"aria-expanded":t===0?"true":"false","aria-controls":"collapse"+t},[s("span",null,[s("i",{class:d(["bi","bi-"+(t+1)+"-circle-fill"])},null,2),a[1]||(a[1]=V("Â  ",-1)),s("strong",null,i(m(r)("whois.Provider"))+" : "+i(o.toUpperCase()),1)])],10,ne)],8,ie),s("div",{id:"collapse"+t,class:d(["accordion-collapse collapse",{show:t===0}]),"aria-labelledby":"heading"+t},[s("div",{class:d(["accordion-body",[I.value?" p-2":""]])},[s("div",{class:d(["card card-body border-0 mt-3",[b.value?"bg-black text-light":"bg-light"]])},[s("pre",null,i(D(h.value[f.value[t]].__raw)),1)],2)],2)],10,ce)]))),128))],8,le)):(n(),l("div",{key:1,class:d(["card card-body border-0 mt-3",[b.value?"bg-black text-light":"bg-light"]])},[s("pre",null,i(S(h.value.__raw)),1)],2))])):w("",!0)])],2)])])]))}},ge=F(de,[["__scopeId","data-v-b3d21565"]]);export{ge as default};
